import{_ as n,o as l,c as p,b as s,d as a,t as o,a as e}from"./app.ca57c996.js";const m=JSON.parse('{"title":"建立模板 Templates","description":"","frontmatter":{},"headers":[{"level":2,"title":"前端輸入模板","slug":"前端輸入模板","link":"#前端輸入模板","children":[]},{"level":2,"title":"註冊模板","slug":"註冊模板","link":"#註冊模板","children":[]},{"level":2,"title":"靜態文件註冊","slug":"靜態文件註冊","link":"#靜態文件註冊","children":[]}],"relativePath":"backend_develop/django/new_template.md","lastUpdated":1687825922000}'),t={name:"backend_develop/django/new_template.md"},c=s("h1",{id:"建立模板-templates",tabindex:"-1"},[a("建立模板 Templates "),s("a",{class:"header-anchor",href:"#建立模板-templates","aria-hidden":"true"},"#")],-1),r=s("p",null,[a("這裡模板使用與 "),s("code",null,"FastAPI"),a(" 的 "),s("code",null,"Jinja"),a(" 語法相似。")],-1),D=s("code",null,"vuejs",-1),y=e(`<p><code>if</code>、<code>loop</code>條件的判斷、迴圈式，則需要在標籤上加入<code>&lt;% if %&gt;</code>、<code>&lt;% endif %&gt;</code>。</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#F07178;">DOCTYPE</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#676E95;font-style:italic;">&lt;!-- 判斷式 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;% if abc==1 %&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;">&lt;!-- 迴圈 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                &lt;% for todo in todos %&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> {{ todo name }} </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                &lt;% endfor %&gt;             </span></span>
<span class="line"><span style="color:#A6ACCD;">            &lt;% endif %&gt;   </span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="前端輸入模板" tabindex="-1">前端輸入模板 <a class="header-anchor" href="#前端輸入模板" aria-hidden="true">#</a></h2><p>這裡建立一個 <code>input.html</code> 模板，來將輸入的數據<code>post</code>送到後端。這裡有掛上 <code>{% csrf_token %}</code>，這是簡易的預防被 <code>CSRF</code>攻擊。</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">addrecord/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    {% csrf_token %}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> First Name: </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">first</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Last Name: </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">last</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">submit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Submit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><h2 id="註冊模板" tabindex="-1">註冊模板 <a class="header-anchor" href="#註冊模板" aria-hidden="true">#</a></h2><p>必須要先告訴 <code>Django</code> 模板位置</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># settings.py</span></span>
<span class="line"><span style="color:#A6ACCD;">TEMPLATES</span><span style="color:#89DDFF;">=[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DIRS</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">templates</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># ...</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ...</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提醒:</p><p>如果是使用其他框架所建立的模板，例如<code>vue.js</code>等，這裡則改成指定的<code>dist</code>資料夾 <code>[&#39;frontend_myvue/dist&#39;]</code></p></div><p>再來則需要告訴 view 來導向模板，這裡有幾種方法 <code>render</code>、<code>loader.get_template()</code>，試過 <code>render</code>是可行，而 <code>loader.get_template()</code> 還在測試。</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">shortcuts </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> render</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ...</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">index</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ...</span></span>
<span class="line"></span></code></pre></div><h2 id="靜態文件註冊" tabindex="-1">靜態文件註冊 <a class="header-anchor" href="#靜態文件註冊" aria-hidden="true">#</a></h2><p><code>Django</code>不會知道你的靜態文件放在哪裡，所以也要指定資料夾，新增以下這串內容才能啟用。</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># settings.py</span></span>
<span class="line"><span style="color:#A6ACCD;">STATICFILES_DIRS</span><span style="color:#89DDFF;">=[</span></span>
<span class="line"><span style="color:#A6ACCD;">    os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">BASE_DIR</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">frontend_myvue/dist/static</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>網路有人這樣寫:</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">MEDIA_ROOT </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">BASE_DIR</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">static</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">MEDIA_URL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">frontend_myvue/dist/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>官方這樣寫:</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">STATIC_URL</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">static/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div>`,18);function F(i,d,C,A,u,h){return l(),p("div",null,[c,r,s("p",null,[a("在標籤內都使用 "),s("code",null,o()+" 雙括弧",1),a(" 來置入後端提供的變數與"),D,a(" 相似。")]),y])}const _=n(t,[["render",F]]);export{m as __pageData,_ as default};
