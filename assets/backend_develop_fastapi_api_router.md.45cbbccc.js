import{_ as s,o as a,c as n,a as l}from"./app.45fb3b71.js";const A=JSON.parse('{"title":"建立外部路由","description":"","frontmatter":{},"headers":[{"level":3,"title":"引入外部路由","slug":"引入外部路由","link":"#引入外部路由","children":[]},{"level":2,"title":"參考","slug":"參考","link":"#參考","children":[]}],"relativePath":"backend_develop/fastapi/api_router.md","lastUpdated":1683292222000}'),o={name:"backend_develop/fastapi/api_router.md"},e=l(`<h1 id="建立外部路由" tabindex="-1">建立外部路由 <a class="header-anchor" href="#建立外部路由" aria-hidden="true">#</a></h1><p>建立外部路由使用<code>APIRouter</code>模組，將設定的路由包起來。</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># route.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> fastapi </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> APIRouter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Depends</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dependencies </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> get_token_header</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">FastAPI</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 建立新router，指定路由根目錄為&quot;/items&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">router</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">APIRouter</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;font-style:italic;">prefix</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/items</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;font-style:italic;">tags</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">items</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;font-style:italic;">dependencies</span><span style="color:#89DDFF;">=[</span><span style="color:#82AAFF;">Depends</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">get_token_header</span><span style="color:#89DDFF;">)],</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;font-style:italic;">responses</span><span style="color:#89DDFF;">={</span><span style="color:#F78C6C;">404</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Not found</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}},</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 雖然為 &quot;/&quot;跟目錄，實際顯示會變成 &quot;/items&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">router</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">get_data</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">pass</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>指定路由會有4個選項:</p><ul><li><code>prefix</code> : 指定<code>路由</code></li><li><code>tags</code> : 路由<code>標籤</code></li><li><code>dependencies</code> : <code>依賴項目</code>(例如指定token，需相符才能進入路由內)</li><li><code>responses</code> : 回饋路由(如果<code>依賴項目</code>錯誤，則導向其他方向，例如404)</li></ul><p>上述也可寫在主檔<code>main</code>的<code>include_router</code>中</p></div><hr><h3 id="引入外部路由" tabindex="-1"><em>引入外部路由</em> <a class="header-anchor" href="#引入外部路由" aria-hidden="true">#</a></h3><p>在主檔中將外部router包起來。</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># main.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> routers </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> router</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 把指定的路由涵蓋起來</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">include_router</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">router</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="參考" tabindex="-1">參考 <a class="header-anchor" href="#參考" aria-hidden="true">#</a></h2><ul><li><a href="https://fastapi.tiangolo.com/tutorial/bigger-applications/?h=apirouter#another-module-with-apirouter" target="_blank" rel="noreferrer">Another module with APIRouter</a></li></ul>`,10),p=[e];function t(c,r,i,F,y,D){return a(),n("div",null,p)}const u=s(o,[["render",t]]);export{A as __pageData,u as default};
