import{_ as s,o as a,c as l,a as n}from"./app.ca57c996.js";const A=JSON.parse('{"title":"建立子路由 (urls)","description":"","frontmatter":{},"headers":[{"level":2,"title":"傳送引數 kwargs","slug":"傳送引數-kwargs","link":"#傳送引數-kwargs","children":[]},{"level":2,"title":"接收前端丟過來的資料 ( urls.py )","slug":"接收前端丟過來的資料-urls-py","link":"#接收前端丟過來的資料-urls-py","children":[]}],"relativePath":"backend_develop/django/new_url.md","lastUpdated":1687825922000}'),o={name:"backend_develop/django/new_url.md"},p=n(`<h1 id="建立子路由-urls" tabindex="-1">建立子路由 (urls) <a class="header-anchor" href="#建立子路由-urls" aria-hidden="true">#</a></h1><p>這裡就是應用 app 的子路由設定檔，所以必須在應用 <code>/myapp</code> 資料夾內則建立 <code>urls.py</code> 檔案。建議可以參照主路由 (<a href="http://urls.py" target="_blank" rel="noreferrer">urls.py</a>) 檔的設定。</p><p>坦白講操作過 <code>FastAPI</code> 後，反而會不太習慣 <code>Django</code> 路由的操作。</p><p>這裡有一個規範 <code>path(&#39;route&#39;, view, name, kwargs)</code>:</p><ol><li><code>route</code> 子路由，一般寫法 <code>&quot;mypath/&quot;</code>，或自定義路由 <code>&quot;mypath/&lt;int:any_id&gt;/&quot;</code>。 官方 <a href="https://django.readthedocs.io/en/stable/topics/http/urls.html" target="_blank" rel="noreferrer">Django URL dispatcher</a></li><li><code>view</code> 這是 <code>views.py</code> 與 <code>urls.py</code> 連接的方法，所以是取用<code>views.py</code>內的def定義函式。</li><li><code>name</code> 幫 url 命名，方便辨識，可省略。</li><li><code>kwargs</code> 傳遞引數，如果沒有引數，也可省略。</li></ol><blockquote><p>舉例 : path (&#39;mypath/<a href="int:any_id" target="_blank" rel="noreferrer">int:any_id</a>&#39;, views.def_path, name=&quot;mypath&quot;, kwargs={&quot;msg&quot;:&quot;hi! it&#39;s me!&quot;})</p></blockquote><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>route 後面一定要加 &quot;/&quot; 斜線，否則 Django 會讀錯誤的風險。</p></div><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">urls </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> path</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> views</span></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">world/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">hello</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><p>到這裡設定路由後會變成 <code>http://127.0.0.1:8000/hello/world/</code>，可以看出<code>urls.py</code>與<code>myapp/urls.py</code>參數的顯示順序。</p><h2 id="傳送引數-kwargs" tabindex="-1">傳送引數 kwargs <a class="header-anchor" href="#傳送引數-kwargs" aria-hidden="true">#</a></h2><p>如果路由上想要丟給 <code>view</code> 資料，可以用 <code>kwargs</code>。</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">world/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">hello</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">kwargs</span><span style="color:#89DDFF;">={</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">msg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">good!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><h2 id="接收前端丟過來的資料-urls-py" tabindex="-1">接收前端丟過來的資料 ( <a href="http://urls.py" target="_blank" rel="noreferrer">urls.py</a> ) <a class="header-anchor" href="#接收前端丟過來的資料-urls-py" aria-hidden="true">#</a></h2><p>在<code>html</code>裡面要指定函式，例如下方就使用<code>method=&#39;POST&#39;</code>及<code>{% url &#39;add_item&#39; %}</code>來餵給後端表單資料。</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{% url &#39;add_item&#39; %}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  ....</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">form</span></span>
<span class="line"></span></code></pre></div><p>在 <code>urls</code> 這裡其實只要指定 <code>views</code> 內的方法即可接收或處理前端丟過來的資料，</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">urls </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> path</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> views</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#...</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">index</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">keyin/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ontable</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">record</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 餵我資料</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get_me_data/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">add_item</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">add_item</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>這裡必須配合 <code>views.py</code>所 def 定義的函式</p></div>`,18),e=[p];function t(c,r,D,y,F,i){return a(),l("div",null,e)}const C=s(o,[["render",t]]);export{A as __pageData,C as default};
