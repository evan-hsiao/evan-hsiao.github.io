import{_ as o,o as t,c as e,b as s,d as n,t as a,a as l}from"./app.ee1d1b16.js";const c="/assets/class_form_insert.65aea5b4.png",B=JSON.parse('{"title":"中興大學 Python Django網頁App開發基礎班第01期 II","description":"","frontmatter":{},"headers":[{"level":2,"title":"07/21 Jinja語法初探","slug":"_07-21-jinja語法初探","link":"#_07-21-jinja語法初探","children":[]},{"level":2,"title":"07/26 Jinja與DataSet初探","slug":"_07-26-jinja與dataset初探","link":"#_07-26-jinja與dataset初探","children":[]},{"level":2,"title":"07/28 <input> 標籤與 Javascript 應用","slug":"_07-28-input-標籤與-javascript-應用","link":"#_07-28-input-標籤與-javascript-應用","children":[]},{"level":2,"title":"08/02 實作與前置規畫","slug":"_08-02-實作與前置規畫","link":"#_08-02-實作與前置規畫","children":[]}],"relativePath":"backend_develop/django/note_django_class_1.md","lastUpdated":1691634153000}'),r={name:"backend_develop/django/note_django_class_1.md"},D=s("h1",{id:"中興大學-python-django網頁app開發基礎班第01期-ii",tabindex:"-1"},[n("中興大學 Python Django網頁App開發基礎班第01期 II "),s("a",{class:"header-anchor",href:"#中興大學-python-django網頁app開發基礎班第01期-ii","aria-hidden":"true"},"#")],-1),F=s("p",null,"2023/07/21-2023/08/02",-1),y=s("h2",{id:"_07-21-jinja語法初探",tabindex:"-1"},[n("07/21 Jinja語法初探 "),s("a",{class:"header-anchor",href:"#_07-21-jinja語法初探","aria-hidden":"true"},"#")],-1),i=s("li",null,[s("p",null,[n("模板"),s("code",null,"templates"),n("操作 以 python 的框架建構前端，大多使用 Jinja 模板語法，當前後分離建構各自框架語法，則不受限於此。")])],-1),A=s("code",null,"Jinja",-1),C=s("code",null,"vue",-1),d=s("code",null,"vue",-1),u=s("code",null,"delimiters",-1),g=s("code",null,"雙中括弧 [[]]",-1),h=s("a",{href:"https://vuejs.org/api/application.html#app-config-compileroptions",target:"_blank",rel:"noreferrer"},"Vue官方",-1),f=l(`<div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">compilerOptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">delimiters</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">]]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"></span></code></pre></div><p>或</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> app</span><span style="color:#89DDFF;">={</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F07178;">setup</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F07178;">delimiters</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">]]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">   </span></span>
<span class="line"></span></code></pre></div><p>或</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#FFCB6B;">template</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#FFCB6B;">compilerOptions</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">delimiters</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">]]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,5),E=l(`<div class="tip custom-block"><p class="custom-block-title">提醒</p><p>通常 templates 資料夾需建立在每個 app 應用資料夾內，且資料夾命名不能更改，如果有特定資料夾名稱或建立在其他地方，需至 <a href="http://settings.py" target="_blank" rel="noreferrer">settings.py</a> 內進行修改。 <a href="https://docs.djangoproject.com/en/4.2/topics/templates/#support-for-template-engines" target="_blank" rel="noreferrer">官方</a></p></div><ol start="3"><li><code>Jinja</code>基本語法:<div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 接受變數 --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">{{ 變數名 }}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 繼承區塊 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{% block blockname %}{% endblock %}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 繼承模板 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{% extends &quot;繼承.html&quot; %}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 判斷區塊 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{% if a&lt;=12 %}{% endif %}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 迴圈區塊 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{% for arr in arrdate %}{% endfor %}</span></span>
<span class="line"></span></code></pre></div></li><li><a href="https://getbootstrap.com/docs/5.3/getting-started/introduction/" target="_blank" rel="noreferrer">Bootstrap</a>基本介紹與參考。</li></ol><h2 id="_07-26-jinja與dataset初探" tabindex="-1">07/26 Jinja與DataSet初探 <a class="header-anchor" href="#_07-26-jinja與dataset初探" aria-hidden="true">#</a></h2>`,3),_=l(`<li><p>django 傳輸到 templates 的方法:</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">f</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">request</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">HttpRequest</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">模板.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">傳遞資料</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">傳遞值</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span></code></pre></div></li><li><p>模板存放位置(templates) 預設需存放在app應用資料夾內，否則須到內<code>settings.py</code>註冊位置。</p></li><li><p><code>Jinja</code> 標籤制定:</p><ul><li><code>&lt;% extend &#39;擴充模板.html&#39; %&gt;</code></li><li><code>&lt;% include %&gt; 插入模板</code></li><li><code>&lt;% block name %&gt; 區塊 &lt;% endblock %&gt;</code></li><li><code>&lt;% if %&gt; 判斷式 &lt;% elif %&gt;&lt;% endif %&gt;</code></li><li><code>&lt;% for %&gt; 迴圈 &lt;% endif %&gt;</code></li><li><code>&lt;% wih %&gt; 設定變數 &lt;% endwith %&gt;</code></li></ul></li>`,3),m=s("p",null,[s("code",null,"template"),n(" 類型:")],-1),b=s("li",null,[s("code",null,"{% 指令 %}")],-1),v=l(`<li><p>前端陣列變數宣告:</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">arr</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">evan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">age</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">18</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> arr </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endfor </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre></div></li><li><p><strong>Class資料集 <code>DataSet</code>觀念(搭配MySQL):</strong></p><p><code>class</code>是一個很重要的物件導向類別。一開始會先宣告空字串(columns、results)給後續資料放進去。</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataSet</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 先預設連結、除錯、欄位、結果都為空值或false</span></span>
<span class="line"><span style="color:#A6ACCD;">   dbconn </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span></span>
<span class="line"><span style="color:#A6ACCD;">   debug </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">False</span></span>
<span class="line"><span style="color:#A6ACCD;">   columns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span></span>
<span class="line"><span style="color:#A6ACCD;">   results </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 定義父層為資料庫連結、開啟除錯</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">debug</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">bool</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">False)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">      self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dbconn</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> connection</span></span>
<span class="line"><span style="color:#A6ACCD;">      self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">debug</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> debug</span></span>
<span class="line"></span></code></pre></div><ul><li>Query 選擇 : 在資料庫 <code>sql</code> 連結時，一律先判斷所傳輸來的方法是否正確。通常不會知道收到的參數有多少內容，所以會使用 <code>*args</code> 作為變數。</li></ul><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 定義提取資料(自身, 資料庫:字串, *資料參數)</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Query</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">sql</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 判斷送來的方法開頭(startswith)傳換成大寫(upper)後是否為 SELECT</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> sql</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">strip</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">upper</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">startswith</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SELECT</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;font-style:italic;">raise</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">錯誤，非SELECT命令</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 開啟除錯模式</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">debug</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">除錯中:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> sql</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> args</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 連結資料庫</span></span>
<span class="line"><span style="color:#A6ACCD;">     cursor </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dbconn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cursor</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 打包資料庫(資料名,參數)</span></span>
<span class="line"><span style="color:#A6ACCD;">     cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sql</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> args</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 打包欄位，從第0筆開始，依據上段打包(cursor)的描述(description)</span></span>
<span class="line"><span style="color:#A6ACCD;">     self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">columns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">col</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> col </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> cursor</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">description</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 打包資料成為dict</span></span>
<span class="line"><span style="color:#A6ACCD;">     self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">results</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">dict</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">zip</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">columns</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> row</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> row </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fetchall</span><span style="color:#89DDFF;">()]</span></span>
<span class="line"></span></code></pre></div><ul><li>Update 更新</li></ul><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 更新內值</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Update</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">sql</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">int</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 判斷送來的是否為 SELECT 的開頭</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> sql</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">strip</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">upper</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">startswith</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SELECT</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;font-style:italic;">raise</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Insert, Update and Delete support only!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># ---</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">debug</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Update :</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> sql</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> args</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># ---</span></span>
<span class="line"><span style="color:#A6ACCD;">     cursor </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dbconn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cursor</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">     cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sql</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> args</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># ---</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> cursor</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">rowcount</span></span>
<span class="line"></span></code></pre></div><ul><li>Row Count 總數統計</li></ul><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 資料數統計</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">get_Row_Count</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">int</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 判斷送來的欄位、結果是否為空值</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">columns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">results</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#676E95;font-style:italic;"># 回饋資料總數</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">results</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><ul><li>Get Value 取得內值</li></ul><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 取得內值(查找)</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">get_Value</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">row</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">int</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">colna</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">any</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 判斷送來的欄位、結果是否為空值</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">columns</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">results</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 判斷送來的參數是否不在資料數統計內</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> row </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> row </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_Row_Count</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;font-style:italic;">raise</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">超出索引值!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 判斷送來的參數是否不在資料數統計內</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> colna </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">columns</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;font-style:italic;">raise</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">資料不存在!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#676E95;font-style:italic;"># 回饋查詢結果</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">results</span><span style="color:#89DDFF;">[</span><span style="color:#F07178;">row</span><span style="color:#89DDFF;">][</span><span style="color:#A6ACCD;">colna</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><ul><li>ColumnSet 欄位打包</li><li>ResultSet 結果打包</li><li>Begin 儲存過程(進階)</li><li>Commit 儲存/交提(mysql進階)</li><li>Rollback 錯誤時回傳前次資料狀態(進階)</li></ul><p>參考 : <a href="https://www.learncodewithmike.com/2020/02/python-mysql.html" target="_blank" rel="noreferrer">掌握Python連結MySQL資料庫的重要操作</a></p></li><li><p>前端輸入的方法 (GET、POST)</p><ul><li><p><code>client</code>端 : 傳遞資料的方法</p><ul><li>直接輸入網址。</li><li><code>&lt;form&gt;</code> 表單標籤，需搭配 <code>method</code>方法，負責傳送資料。</li></ul><p>參考 :<a href="https://www.w3schools.com/html/html_forms.asp" target="_blank" rel="noreferrer">W3S Form</a></p><ul><li><code>&lt;input&gt;</code> 輸入標籤，需搭配 <code>{% csrf_token %}</code>加密。</li><li><code>&lt;textarea&gt;</code> 輸入多行文字標籤。</li><li><code>&lt;select&gt;</code> 選擇/下拉選單標籤。</li></ul></li><li><p><code>request</code>端 : 請求的方法</p><ul><li>GET : 明碼傳送，透過網址顯示，不適和用在密碼傳送。</li><li>POST : 非明碼傳送，打包方式傳送。</li></ul></li></ul></li>`,3),q=l(`<h2 id="_07-28-input-標籤與-javascript-應用" tabindex="-1">07/28 <code>&lt;input&gt;</code> 標籤與 Javascript 應用 <a class="header-anchor" href="#_07-28-input-標籤與-javascript-應用" aria-hidden="true">#</a></h2><ol><li><p><code>HTML</code> 與 <code>JS</code> 應用:</p><ol><li>Django限制 : 只要有 <code>&lt;input&gt;</code> 輸入標籤，一律內部加入 <code>{% csrf_token %}</code> 來防止身分偽造，否則會產生錯誤訊息。</li></ol><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   {% csrf_token %}</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li><code>&lt;input type=&#39;password&#39;&gt;</code>一律不設置 <code>vaule</code> 屬性，避免產生資安問題。</li><li><code>&lt;input type=&#39;checkbox&#39;&gt;</code><input type="checkbox">解決未勾選無傳送訊息時，與批次點選傳送訊息的接收方法。</li></ol><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">&lt;!-- 追加隱藏的 checkbox --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hidden</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">N</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">checkbox</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onclick</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;">set_checkbox</span><span style="color:#C3E88D;">(</span><span style="color:#89DDFF;">this</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> Option1 </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;font-style:italic;">//偵測點選</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;font-style:italic;">// 善用 node 節點方式</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">set_checkbox</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">node</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">chVal</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Y</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">unVal</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">N</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;font-style:italic;">// 上一個(previousElementSibling)或下一個(nextElementSibling)物件選擇器方式</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">vNode</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">previousElementSibling</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 利用 ? 符號作為判斷，可省去 if 宣告</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">vNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">vNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">chVal</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">unVal</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">chVal</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">checked</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">vNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">chVal</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>JS 參考 : <a href="https://www.w3schools.com/jsref/prop_element_previouselementsibling.asp" target="_blank" rel="noreferrer">W3S_HTML DOM Element previousElementSibling</a></li></ul><ol start="4"><li><code>&lt;input type=&#39;radio&#39;&gt;</code><input type="radio">解決未點選無傳送訊息，與批次點選傳送訊息的接收方法；解決方式與<code>checkbox</code>類似。</li></ol><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">&lt;!-- 使用 div 包覆後，增加1個隱藏的 radio，並強迫起始value為option--&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hidden</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">option1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">option1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">checked</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onclick</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">set_radio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">for</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Option1</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">option2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onclick</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">set_radio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">for</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Option2</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">input</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">option3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">onclick</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">set_radio</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">for</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">radio1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Option3</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">   </span><span style="color:#676E95;font-style:italic;">//善用節點node</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">set_radio</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">node</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 採用2個parentNode父層方式找到最外圍的物件</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">topNode</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parentNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parentNode</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 建立最上層的物件</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">valNode</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">topNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstElementChild</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">valNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// 使用迴圈，採最上層的總數為基準</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">var</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">topNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">children</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">++</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#A6ACCD;">radioNode</span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">topNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">children</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">firstElementChild</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#A6ACCD;">radioNode</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">checked</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">radioNode</span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>JS 參考 : <a href="https://www.w3schools.com/jsref/prop_node_parentnode.asp" target="_blank" rel="noreferrer">W3S_HTML DOM Element parentNode</a></li></ul></li><li><p>從 <code>client</code> 端傳送到 <code>server</code> 端，在表單中所建立的 <code>action</code>屬性，需與 <code>server</code> 端的 <code>views.py</code>、<code>urls.py</code>對應正確。</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- from.html --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/myaction/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># views.py</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myaction</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">request</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">HttpRequest</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">method</span><span style="color:#89DDFF;">==</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">show_data.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">passdata</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">GET</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">show_data.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">passdata</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span></code></pre></div><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># app/urls.py</span></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns</span><span style="color:#89DDFF;">=[</span></span>
<span class="line"><span style="color:#A6ACCD;">   ...</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myaction/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">myaction</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">action_form</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提醒:</p><ol><li><code>表單</code>與實際後端所丟出來的畫面是不同 <code>html</code>。</li><li><code>&lt;form&gt;</code>標籤，送出後要開啟新視窗須加上<code>target=&#39;_blank&#39;</code>屬性，未加此屬性，則會在原畫面轉跳。</li></ol></div></li></ol><h2 id="_08-02-實作與前置規畫" tabindex="-1">08/02 實作與前置規畫 <a class="header-anchor" href="#_08-02-實作與前置規畫" aria-hidden="true">#</a></h2><ol><li><p>Insert 實作 <img src="`+c+`" alt="insert_view"></p><ol><li><p>實作前資料表(database)欄位與格式規劃:</p><ol><li><p>創建schema.sql來規劃個欄位與格式:</p><ol><li>資料表名稱(stud)</li><li>欄位 ( PRIMARY KEY、AUTO_INCREMENT )</li></ol><table><thead><tr><th style="text-align:center;">欄位</th><th style="text-align:center;">type</th><th style="text-align:center;">default</th><th style="text-align:center;">description</th></tr></thead><tbody><tr><td style="text-align:center;">rowid</td><td style="text-align:center;">BIGINT</td><td style="text-align:center;">AUTO_INCREMENT</td><td style="text-align:center;">PRIMARY KEY</td></tr><tr><td style="text-align:center;">studid</td><td style="text-align:center;">CHAR(10)</td><td style="text-align:center;">NOT NULL</td><td style="text-align:center;">學號</td></tr><tr><td style="text-align:center;">studna</td><td style="text-align:center;">VARCHAR(50)</td><td style="text-align:center;">NOT NULL</td><td style="text-align:center;">姓名</td></tr><tr><td style="text-align:center;">gedner</td><td style="text-align:center;">CHAR(1)</td><td style="text-align:center;">DEFAULT</td><td style="text-align:center;">性別</td></tr><tr><td style="text-align:center;">bday</td><td style="text-align:center;">DATE</td><td style="text-align:center;">NOT NULL</td><td style="text-align:center;">出生日期</td></tr><tr><td style="text-align:center;">langchi</td><td style="text-align:center;">CHAR(04)</td><td style="text-align:center;">DEFAULT &#39;NNNN&#39;</td><td style="text-align:center;">中文</td></tr><tr><td style="text-align:center;">langeng</td><td style="text-align:center;">CHAR(04)</td><td style="text-align:center;">DEFAULT &#39;NNNN&#39;</td><td style="text-align:center;">英文</td></tr><tr><td style="text-align:center;">langjpn</td><td style="text-align:center;">CHAR(04)</td><td style="text-align:center;">DEFAULT &#39;NNNN&#39;</td><td style="text-align:center;">日文</td></tr><tr><td style="text-align:center;">studkd</td><td style="text-align:center;">CHAR(05)</td><td style="text-align:center;">NOT NULL</td><td style="text-align:center;">學生類別</td></tr></tbody></table></li></ol></li><li><p>模板/表單(form)欄位: 採 <a href="https://www.w3schools.com/bootstrap5/bootstrap_form_input_group.php" target="_blank" rel="noreferrer">W3S Bootstrap</a> 的 <code>Input Groups</code> 當表單欄位。</p><ol><li>Insert 新增 : <code>studInsert.html</code></li><li>Update 修改 : <code>studUpdate.html</code></li><li>Delete 刪除 : <code>studDelete.html</code></li></ol></li></ol><div class="tip custom-block"><p class="custom-block-title">建議</p><p>基本上模板僅需要製作1組，後續再取用複製修改即可，縮短建構前端頁面的時間。</p></div><ol start="3"><li>路由(urls): 以 CRUD 方式作為路由。 <ol><li>Insert 新增 : <code>/stud/ins/</code></li><li>Update 修改 : <code>/stud/upd/</code></li><li>Delete 刪除 : <code>/stud/del/</code></li></ol></li></ol><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/stud/ins/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">studInsert</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/stud/upd/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">studUpdate</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/stud/del/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">studDelete</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>事件處理項目(views): 同樣以 新增、修改、刪除作為宣告。 <ol><li><code>Insert 新增</code>採取上次課堂建立的<code>ulit.py</code>模組 <code>DataSet</code>來搭配表單欄位。</li></ol></li></ol><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">studInsert</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">request</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">HttpRequest</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 先做判斷前端送出來的方法: GET/POST</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">method</span><span style="color:#89DDFF;">==</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">studInsert.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;"># 合併綜合欄位(如:中、英、日文的聽說讀寫)</span></span>
<span class="line"><span style="color:#A6ACCD;">      wk_langchi </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getlist</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">langchi</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">      wk_langeng </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getlist</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">langeng</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">      wk_langjpn </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getlist</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">langjpn</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;">         </span></span>
<span class="line"></span></code></pre></div><p>啟用 DataSet()</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;"># 使用 ulit.py 內的 DataSet()</span></span>
<span class="line"><span style="color:#A6ACCD;">      applySet</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">DataSet</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><p>使用<code>sql</code>語法，外層再用 if 包圍做欄位的判斷。</p><div class="language-py"><button title="Copy Code" class="copy"></button><span class="lang">py</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 判斷欄位如果等於0，代表未寫入</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> applySet</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Update</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">      </span><span style="color:#676E95;font-style:italic;"># 欄位對應sql</span></span>
<span class="line"><span style="color:#82AAFF;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">INSERT INTO studinfos (studid,studna,gedner,bday,langchi,langeng,langjpn,studkd)</span></span>
<span class="line"><span style="color:#82AAFF;">          VALUES </span><span style="color:#89DDFF;">(%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">,%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">,%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">,%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">,%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">,%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">,%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">,%</span><span style="color:#82AAFF;">s</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#82AAFF;">          request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">studid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">          request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">studna</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">          request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gedner</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">          request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">          wk_langchi</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">          wk_langeng</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">          wk_langjpn</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">          request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">POST</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">studkd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#82AAFF;">      </span><span style="color:#89DDFF;">)==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HttpResponse</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;h1&gt;新增資料有誤!&lt;/h1&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HttpResponse</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;h1&gt;新增資料完成!&lt;/h1&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提醒</p><p>此方法上有1錯誤待解決，也就是缺乏判斷資料表內是否有重複，所以當重整畫面後，如果<code>studid</code>沒有更新，會產生錯誤，因為在資料庫上已經有先預設索引值 <code>UNIQUE INDEX</code>。</p></div><ol start="2"><li><code>Update 修改</code>，修改資料步驟規劃 : <ol><li>取出<code>對應</code>的舊資料。</li><li>將資料放到表單呈現。</li><li><code>&lt;input&gt;</code>中的<code>date</code>屬性呈現需<code>js</code>協助。</li><li>使用者修改後再回存後端。</li></ol></li></ol></li><li><p>總結 :</p><ol><li>表單建構需要注意每個欄位的<code>name</code>屬性命名，否則會導致後端接收錯誤。 <ol><li>留意<code>checkbox</code>、<code>radio</code>兩個屬性，當使用者如果未勾選，會造成資料遺漏，需要增加一個標籤有隱藏<code>hidden</code>屬性與<code>js</code>協助判斷回傳資訊。</li></ol></li><li><code>views</code>處理的事件中，要多利用 <code>DataSet</code>來串接，避免多寫程式。</li><li>上述方法僅初階，尚未達到量產效益，需再改善。</li></ol></li><li><p>參考資訊:</p><ul><li><a href="https://www.youtube.com/watch?v=AJfZvl9Hsn4" target="_blank" rel="noreferrer">Python 零基礎新手入門 #10 Class (類別)</a></li><li><a href="https://hackmd.io/@NCHUIT/py1100511?print-pdf#/" target="_blank" rel="noreferrer">類別與物件</a></li></ul></li></ol>`,4);function x(p,k,T,N,j,S){return t(),e("div",null,[D,F,y,s("ol",null,[i,s("li",null,[s("p",null,[A,n(" 與 "),C,n(" 變數語法中的"),s("code",null,"雙大括弧 "+a(),1),n("衝突。 只有一方要退讓，就是 "),d,n(" 前端設定 "),u,n(" 改成 "),g,n("。"),h]),f])]),E,s("ol",null,[_,s("li",null,[m,s("ul",null,[b,s("li",null,[s("code",null,a(p.變數),1)])])]),v]),q])}const I=o(r,[["render",x]]);export{B as __pageData,I as default};
