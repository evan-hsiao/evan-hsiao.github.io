import{_ as s,o as a,c as n,a as l}from"./app.ca57c996.js";const C=JSON.parse('{"title":"與瀏覽器的儲存方式 Persist Data","description":"","frontmatter":{},"headers":[{"level":2,"title":"常用語法","slug":"常用語法","link":"#常用語法","children":[]},{"level":2,"title":"放在Pinia/vuex內","slug":"放在pinia-vuex內","link":"#放在pinia-vuex內","children":[]}],"relativePath":"frontend_develop/vue/set_storage.md","lastUpdated":1687856986000}'),e={name:"frontend_develop/vue/set_storage.md"},o=l(`<h1 id="與瀏覽器的儲存方式-persist-data" tabindex="-1">與瀏覽器的儲存方式 Persist Data <a class="header-anchor" href="#與瀏覽器的儲存方式-persist-data" aria-hidden="true">#</a></h1><p>在<code>登入login</code>或<code>註冊sing</code>或限制部分畫面顯示，都與瀏覽器的<code>cookie</code>相關，當寫入<code>cookie</code>後，才能讓系統辨識操作者的權限。</p><h2 id="常用語法" tabindex="-1">常用語法 <a class="header-anchor" href="#常用語法" aria-hidden="true">#</a></h2><ol><li><code>seessionStorage</code> : 關閉瀏覽器後就消失。</li><li><code>localStorage</code> : 需手動刪除才會消失，容量約5mb。</li></ol><p>使用的方法大同小異:</p><ul><li>setItem(&#39;cookie_name&#39;, save_value) (儲存)</li><li>getItem(&#39;cookie_name&#39;) (取得)</li><li>removeItem(&#39;cookie_name&#39;) (移除)</li><li>clear() (清除參數)</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">seessionStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setItem</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">userName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> name)</span></span>
<span class="line"><span style="color:#A6ACCD;">seessionStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">userName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">seessionStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeItem</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">userName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clear</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 轉化為json格式</span></span>
<span class="line"><span style="color:#A6ACCD;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setItem</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(value))</span></span>
<span class="line"></span></code></pre></div><blockquote><p>參考</p></blockquote><ul><li><a href="https://a2369875.medium.com/vue-%E5%B0%87%E5%8F%83%E6%95%B8%E5%84%B2%E5%AD%98%E5%9C%A8%E7%94%A8%E6%88%B6%E7%AB%AF-sessionstorage-localstorage-6c8ce59c838c" target="_blank" rel="noreferrer">Vue 將參數儲存在用戶端(sessionStorage、localStorage)</a></li><li><a href="https://dev.to/grahammorby/persist-data-with-vue-3-38pc" target="_blank" rel="noreferrer">Persist Data With Vue 3</a></li></ul><h2 id="放在pinia-vuex內" tabindex="-1">放在Pinia/vuex內 <a class="header-anchor" href="#放在pinia-vuex內" aria-hidden="true">#</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// store/index.js</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#FFCB6B;">mutations</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">setToken</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">localStorage</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getItem</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">token</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">auth</span><span style="color:#89DDFF;">=</span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toke</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">auth</span><span style="color:#89DDFF;">=</span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#FFCB6B;">persist</span><span style="color:#89DDFF;">:{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">enabled</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">strategies</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> [</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          key</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">counter</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">          storage</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">client</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">localStorage</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre></div><blockquote><p>參考</p></blockquote><ul><li><a href="https://ithelp.ithome.com.tw/articles/10302381" target="_blank" rel="noreferrer">Nuxt 3 狀態管理 - Store &amp; Pinia</a></li><li><a href="https://jasonwatmore.com/post/2022/07/25/vue-3-pinia-user-registration-and-login-example-tutorial" target="_blank" rel="noreferrer">Vue 3 + Pinia - User Registration and Login Example &amp; Tutorial</a></li></ul>`,13),p=[o];function t(r,c,F,i,D,y){return a(),n("div",null,p)}const d=s(e,[["render",t]]);export{C as __pageData,d as default};
