<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jQuery AjexAPI串接</title>
    <!-- 天氣卡片 -->
    <style>
        body {
            margin: 0;
        }

        .weather_info {
            margin: 0 auto;
            flex-wrap: wrap;
            flex-grow: 30;
            display: flex;
            justify-content: center;
            text-align: center;
        }

        .info_all {
            display: flex;
            align-items: center;
            /* flex-direction: row; */
            justify-content: center;
            padding: 10PX;
            border: 1px solid;
            width:400px;
            height: 200px;
        }
    </style>

</head>

<div class="weather_info">
    <!-- 改描述到js裡面 -->
    <!-- <div class="info_all">
        <h1>台中市</h1>
        <h2>晴時多雲</h2>
        <p>降雨機率: 50%</p>
        <p>溫度: 20 ~ 30C</p>
    </div> -->
</div>

<body>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
        </script>

    <script>
        //使用jquery .ajax串接資訊網址
        $.ajax({
            url: "https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWB-B5282D9D-8FDD-40E9-AD48-B1DF3270465D",
            
            success: function (info) {

                // 宣告變數all_locations
                var all_locations = info.records.location;

                //all_locations 使用forEach擷取 需要的資料位址，並宣告為變數
                all_locations.forEach(location => {
                    // 變數 locationName = 檔案location內 的locationName
                    var locationName = location.locationName;
                    // 變數 Wx = 檔案location內 的weatherElement資料 第[0]筆 
                    var Wx = location.weatherElement[0].time[0].parameter.parameterName;
                    var PoP = location.weatherElement[1].time[0].parameter.parameterName;
                    var MinT = location.weatherElement[2].time[0].parameter.parameterName;
                    var MaxT = location.weatherElement[4].time[0].parameter.parameterName;

                    //將.weather_info資料使用 .info_all的css
                    $(".weather_info").append(`<div class="info_all">
                        <h1>${locationName} </h1>
                        <h2>${Wx} </h2>
                        <p>降雨機率: ${PoP}%</p>
                        <p>溫度: ${MinT} ~ ${MaxT} C</p>
                    </div>`);
                })

            }
        });

    </script>
</body>

</html>